<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>유저 관리</title>
</head>
<body>
<form method = "get" th:action = "@{/home/user}">
  <label>유저 아아디 <input type = "text" name = "username" th:value="${user.username}"></label><br>
  <label>유저 권한
    <select name = "role">
      <option value="" th:selected="${user.role == null}">-- 선택 --</option>
      <option value = "1" th:selected="${user.role == '1'}">일반회원</option>
      <option value = "2" th:selected="${user.role == '2'}">관리자</option>
    </select>
  </label><br>
  <button type="submit">검색</button>
</form>
<table>
  <tr>
    <th>유저 아이디</th>
    <th>권한</th>
  </tr>
  <tr th:each="user : ${userList}">
    <td th:text="${user.username}"></td>
    <td th:text="${user.role == '1' ? '일반회원' : (user.role == '2' ? '관리자' : '알 수 없음')}"></td>
    <td>
      <form th:action="@{/home/user/{id}(id=${user.id})}" method="get" th:object="${user}">
        <input type="hidden" th:name="id" th:value="${user.id}" />
        <button type="submit">유저 편집</button>
      </form>
    </td>
  </tr>
</table>
<a th:href="@{${session.userRole == '2'} ? '/home/admin' : '/home/main'}">메인으로</a>
</body>
</html>